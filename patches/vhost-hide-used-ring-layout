Bottom: 9bf30d99a42e8daf03484699880a3a38bf6eb093
Top:    9bf30d99a42e8daf03484699880a3a38bf6eb093
Author: Jason Wang <jasowang@redhat.com>
Date:   2018-07-02 17:51:07 +0800

vhost: hide used ring layout from device

We used to return descriptor head by vhost_get_vq_desc() to device and
pass it back to vhost_add_used() and its friends. This exposes the
internal used ring layout to device which makes it hard to be extended for
e.g packed ring layout.

So this patch tries to hide the used ring layout by

- letting vhost_get_vq_desc() return pointer to struct vring_used_elem
- accepting pointer to struct vring_used_elem in vhost_add_used() and
  vhost_add_used_and_signal()

This could help to hide used ring layout and make it easier to
implement packed ring on top.

Signed-off-by: Jason Wang <jasowang@redhat.com>


---


