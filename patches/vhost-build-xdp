Bottom: d1b13f7d23cbed2542ccf29a91d52650143670ba
Top:    d1b13f7d23cbed2542ccf29a91d52650143670ba
Author: Jason Wang <jasowang@redhat.com>
Date:   2018-05-13 08:29:30 +0800

vhost_net: build xdp buff

This patch implement build XDP buffers in vhost_net. The idea is do
userspace copy in vhost_net and build XDP buff based on the
page. Vhost_net can then submit one or an array of XDP buffs to
underlayer socket (e.g TUN). TUN can choose to do XDP or call
build_skb() to build skb. To support build skb, vnet header were also
stored into the header of the XDP buff.

This userspace copy and XDP buffs building is key to achieve XDP
batching in TUN, since TUN does not need to care about userspace copy
and then can disable premmption for several XDP buffs to achieve
batching from XDP.

TODO: reserve headroom based on the TUN XDP.

Signed-off-by: Jason Wang <jasowang@redhat.com>


---


