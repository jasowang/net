Bottom: bd9781e6686293b4cceeb6ee0b01ae517332bab8
Top:    bd9781e6686293b4cceeb6ee0b01ae517332bab8
Author: Jason Wang <jasowang@redhat.com>
Date:   2018-01-25 15:00:40 +0800

ptr_ring: fix integer overflow

We try to allocate one more entry for lockless peeking. The adding
operation may overflow which may lead zero was passed to kmalloc()
which return a ZERO_SIZE_PTR wihout any notice. Try to do producing or
consuming on such ring will lead NULL dereference. Fix this detect and
fail early.





---


